# 🎫 Amadeus Ticket Extractor

<div dir="rtl">

## 📖 نظرة عامة

إضافة Chrome لجلب وتحليل التذاكر والقسائم من نظام Amadeus تلقائياً.

### ✨ المميزات الرئيسية

- 🎫 **جلب التذاكر** - جلب قائمة التذاكر وتفاصيلها برقم الجوال
- 📄 **جلب القسائم (EMD)** - جلب وتحليل القسائم الإلكترونية
- 💰 **حساب تلقائي** - حساب الإجمالي والضرائب
- 🔍 **فلترة متقدمة** - فلترة النتائج حسب النوع
- 📊 **إحصائيات مفصلة** - ملخص شامل للنتائج
- 🎨 **واجهة عصرية** - تصميم احترافي وسهل الاستخدام

---

## 🚀 التثبيت

### 1️⃣ تحميل الإضافة
```
1. افتح Chrome
2. اذهب إلى: chrome://extensions/
3. فعّل "وضع المطور" (Developer mode)
4. اضغط "تحميل إضافة غير معبأة" (Load unpacked)
5. اختر مجلد المشروع
```

### 2️⃣ البدء السريع
```
1. افتح صفحة Amadeus
2. اضغط على أيقونة الإضافة 🎫
3. أدخل رقم الجوال (مثال: 966501234567)
4. اضغر "🎫 جلب التذاكر" أو "📄 جلب القسائم"
5. انتظر حتى تكتمل العملية
```

---

## 📊 المعلومات المستخرجة

### 🎫 التذاكر (14 حقل):
- رقم التذكرة (13 رقم)
- اسم المسافر الكامل
- نوع المسافر (بالغ/طفل/رضيع)
- PNR (رمز الحجز)
- رقم الرحلة
- المسار (من → إلى)
- تاريخ الرحلة
- الحالة (مفتوح/مغلق)
- السعر الأساسي
- الضرائب
- الإجمالي
- العملة
- الأمتعة المسموحة
- طريقة الدفع

### 📄 القسائم (6 حقول):
- رقم القسيمة (EMD)
- اسم المسافر
- الحالة (مفتوح، مغلق، صالح، مسترد، ملغي، منتهي، مستخدم)
- التاريخ
- الوصف
- القيمة

---

## 🎯 كيفية الاستخدام

### جلب التذاكر:
```
1. أدخل رقم الجوال: 966501234567
2. اضغط "🎫 جلب التذاكر"
3. انتظر... الإضافة ستقوم بـ:
   ⏳ جلب القائمة (3 ثوان)
   ⏳ جلب تفاصيل كل تذكرة (3 ثوان لكل تذكرة)
4. ✅ عرض النتائج في جدول مفصل
```

### جلب القسائم:
```
1. أدخل رقم الجوال: 966501234567
2. اضغط "📄 جلب القسائم"
3. انتظر 6 ثوان
4. ✅ عرض النتائج مع فلترة حسب النوع
```

---

## ⏱️ الوقت المتوقع

| عدد التذاكر | الوقت المتوقع |
|-------------|---------------|
| 1 تذكرة | 6 ثوان |
| 5 تذاكر | 18 ثانية |
| 10 تذاكر | 33 ثانية |

**💡 نصيحة**: الانتظار يستحق! ستحصل على معلومات شاملة ودقيقة.

---

## 🐛 استكشاف الأخطاء

### ❌ "لم يتم العثور على صفحة Amadeus"
**الحل**:
- تأكد من فتح صفحة Amadeus في Chrome
- تحقق من أن رابط الصفحة يحتوي على "amadeus.com"

### ❌ "فشل في جلب النتائج"
**الحل**:
- تأكد من صحة رقم الجوال
- انتظر قليلاً وحاول مرة أخرى
- افتح Console (F12) لرؤية التفاصيل

### ❌ "بعض التذاكر لا تظهر"
**الحل**:
- افتح Console (F12) لرؤية الأخطاء
- تحقق من أن Amadeus يعرض التفاصيل يدوياً
- جرب إعادة المحاولة

---

## 📁 بنية المشروع

```
AmadeusTicketExtractor/
├── manifest.json          # إعدادات الإضافة
├── popup.html            # واجهة المستخدم
├── popup.js              # المنطق الرئيسي
├── content.js            # التفاعل مع Amadeus
├── icons/                # أيقونات الإضافة
│   ├── icon16.png
│   ├── icon32.png
│   ├── icon48.png
│   └── icon128.png
├── README.md             # هذا الملف
├── CHANGELOG.md          # سجل التغييرات
└── USER_GUIDE.md         # دليل الاستخدام المفصل
```

---

## 📝 الأوامر المستخدمة

### التذاكر:
```
twd/org{phoneNumber}  → جلب قائمة التذاكر
twd/1, twd/2, ...     → جلب تفاصيل كل تذكرة
```

### القسائم:
```
ewd/phone-{phoneNumber}  → جلب قائمة القسائم
```

---

## 🔧 التخصيص

### تغيير وقت الانتظار:

افتح `popup.js` وابحث عن:

```javascript
// الافتراضي: 3 ثوان
await new Promise(resolve => setTimeout(resolve, 3000));

// للتسريع (2 ثانية):
await new Promise(resolve => setTimeout(resolve, 2000));

// للإبطاء (5 ثوان):
await new Promise(resolve => setTimeout(resolve, 5000));
```

**⚠️ تحذير**: تقليل الوقت قد يؤدي لفقدان بعض النتائج.

---

## 🔍 التقنيات المستخدمة

- **Chrome Extension API** - للتفاعل مع المتصفح
- **Content Scripts** - للتفاعل مع صفحة Amadeus
- **Regular Expressions** - لاستخراج البيانات بدقة
- **Async/Await** - للعمليات غير المتزامنة
- **DOM Manipulation** - لعرض النتائج

---

## 📞 الدعم

إذا واجهت أي مشاكل:

1. **افتح Console**: اضغط F12 في نافذة الإضافة
2. **ابحث عن الأخطاء**: رسائل باللون الأحمر
3. **راجع الملفات**: 
   - `README.md` - هذا الملف
   - `CHANGELOG.md` - سجل التغييرات
   - `USER_GUIDE.md` - دليل الاستخدام المفصل

---

## 📄 الترخيص

هذا المشروع مفتوح المصدر للاستخدام الشخصي.

---

## 🙏 شكر وتقدير

شكراً لاستخدامك **Amadeus Ticket Extractor**!

إذا أعجبتك الإضافة:
- ⭐ أضف نجمة للمشروع
- 📢 شاركها مع زملائك
- 💬 أرسل ملاحظاتك واقتراحاتك

---

**الإصدار**: 4.0.2  
**التاريخ**: ديسمبر 2024  
**الحالة**: ✅ جاهز للاستخدام

</div>
